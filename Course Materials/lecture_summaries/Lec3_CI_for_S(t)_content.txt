Lecture: Lec3_CI_for_S(t)
Source: Lec3_CI_for_S(t).pdf

======================================================================

======================================================================
Page 1
======================================================================

BIST P8110: Applied Regression II
3. Calculating Confidence Intervals for S(t)
Qixuan Chen
Department of Biostatistics
Columbia University
1 / 14


======================================================================
Page 2
======================================================================

This lectureâ€™s big ideas
â–¶Greenwoodâ€™s variance estimator
â–¶Constructing 95% CI for S(t)
2 / 14


======================================================================
Page 3
======================================================================

Greenwoodâ€™s variance estimator
â–¶The variance for Ë†S(t) was derived by Greenwood:
d
Var{Ë†S(t)} = Ë†S(t)2
ï£±
ï£²
ï£³
X
j:tjâ‰¤t
dj
nj(nj âˆ’dj)
ï£¼
ï£½
ï£¾
3 / 14


======================================================================
Page 4
======================================================================

95% CI for S(t)
â–¶What is the potential problem with the following CI
estimation?
Ë†S(t) Â± 1.96
q
d
Var{Ë†S(t)}
4 / 14


======================================================================
Page 5
======================================================================

95% CI for S(t)
â–¶What is the potential problem with the following CI
estimation?
Ë†S(t) Â± 1.96
q
d
Var{Ë†S(t)}
â–¶The lower bound can be negative or the upper bound can
be greater than 1.
5 / 14


======================================================================
Page 6
======================================================================

CI for OR
â–¶What can be an alternative approach to construct 95% CI?
â–¶For odds ratio (OR), a log-transformation is used
â–¶estimate CI for log-OR
â–¶back-transform it to obtain CI for OR
6 / 14


======================================================================
Page 7
======================================================================

Log-log transformation of S(t)
â–¶log-log survival function
â–¶transform S(t) to log[âˆ’log{S(t)}]
â–¶range changes from (0, 1) to (âˆ’âˆž, âˆž)
7 / 14


======================================================================
Page 8
======================================================================

Log-log survival function
â–¶Use log-log transformation to construct 95% confidence
interval (CI) for S(t)
â–¶compute 95% CI for log[âˆ’log{S(t)}]
â–¶transform back to find 95% CI for S(t)
â–¶the resulted 95% CI for S(t) is guaranteed to lie in (0, 1)
8 / 14


======================================================================
Page 9
======================================================================

95% CI for log(âˆ’log{S})
â–¶The variance of log[âˆ’log{Ë†S(t)}] is estimated as
Ë†Ïƒ2 =
d
Var{Ë†S(t)}
Ë†S(t)2[log Ë†S(t)]2
=
1
[log Ë†S(t)]2
ï£±
ï£²
ï£³
X
j:tjâ‰¤t
dj
nj(nj âˆ’dj)
ï£¼
ï£½
ï£¾
â–¶A 95% CI for log[âˆ’log{S(t)}] is
log[âˆ’log{Ë†S(t)}] Â± 1.96
âˆš
Ë†Ïƒ2
9 / 14


======================================================================
Page 10
======================================================================

95% CI for S(t) using log-log transformation
â–¶Let Ë†Cu = log[âˆ’log{Ë†S(t)}] + 1.96
âˆš
Ë†Ïƒ2
â–¶the upper bound of the 95% CI for log(âˆ’log{S(t)})
â–¶Let Ë†Cl = log[âˆ’log{Ë†S(t)}] âˆ’1.96
âˆš
Ë†Ïƒ2
â–¶the lower bound of the 95% CI for log(âˆ’log{S(t)})
â–¶The 95% CI for S(t) is

exp(âˆ’exp(Ë†Cu)), exp(âˆ’exp(Ë†Cl))

10 / 14


======================================================================
Page 11
======================================================================

Example
We continue the cancer recurrence example, suppose we have 8
subjects, among which 5 have cancer returned at 10, 13, 14, 17, and
23 weeks, respectively after treatment. The rest 3 subjects dropped
out at 13, 19, and 25 weeks: 10, 13, 13+, 14, 17, 19+, 23, 25+
tj
Interval
nj
dj
pj = njâˆ’dj
nj
Ë†S(tj)
95% CI
0
[0, 10)
8
0
1
1
10
[10, 13)
8
1
7/8
0.875
(0.387, 0.981)
13
[13, 14)
7
1
6/7
0.75
(0.315, 0.931)
14
[14, 17)
5
1
4/5
0.6
(0.196, 0.852)
17
[17, 23)
4
1
3/4
0.45
(0.108, 0.751)
23
[23, âˆž)
2
1
1/2
0.225
(0.012, 0.602)
11 / 14


======================================================================
Page 12
======================================================================

Example (Cont.)
Calculate 95% CI for S(t) with 13 â‰¤t < 14
â–¶Step 1: Calculate Ë†Ïƒ2
Ë†Ïƒ2 =
1
[log Ë†S(t)]2
ï£±
ï£²
ï£³
X
j:tj â‰¤t
dj
nj(nj âˆ’dj)
ï£¼
ï£½
ï£¾=
1
[log(0.75)]2

1
8(8 âˆ’1) +
1
7(7 âˆ’1)

= 0.5035
â–¶Step 2: Calculate 95% CI for log[âˆ’log{S(t)}]
(Ë†Cl, Ë†Cu) = log(âˆ’log{Ë†S(t)}) Â± 1.96 Ã—
âˆš
Ë†Ïƒ2
= log(âˆ’log{0.75}) Â± 1.96 Ã—
âˆš
0.5035
= (âˆ’2.6367, 0.1448)
â–¶Step 3: Calculate 95% CI for S(t)
exp(âˆ’exp(0.1448)), exp(âˆ’exp(âˆ’2.6367))
= (0.315, 0.931)
12 / 14


======================================================================
Page 13
======================================================================

Interpretation of survival functions
â–¶In the cancer recurrence example, we get Ë†S(13) = 0.75
with 95% CI (0.315, 0.931).
â–¶Interpretation
â–¶We estimate that 75% (95% CI: 31.5% â€“ 93.1%) of patients
will survive for more than 13 weeks without cancer
recurrence after treatment.
13 / 14


======================================================================
Page 14
======================================================================

Suggested Readings:
â–¶Chapter 6.1-6.7 (Dupont)
â–¶Chapter 2.1-2.2 (Hosmer et al.)
14 / 14
